import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{u as se,b as te,c as ne,r as c}from"./components-DK7TFnBr.js";import{C as ae}from"./Checkbox-9GjnhRMy.js";import{T as t,b as d,c as m,I as $,C as x,B as j,a as H}from"./ButtonGroup-DgNny8n-.js";import{B as v,P as le}from"./Page-BePJ91lz.js";import{T as ie}from"./TitleBar-aGDsqF3i.js";import{S as K}from"./MagicIcon.svg-Cq1XyIoH.js";import{L as F}from"./Layout-CR-2O1w0.js";import{R as V}from"./RadioButton-DplwoY6N.js";import{S as re}from"./CalendarIcon.svg-Dnb3FKdo.js";import{S as oe}from"./ChartVerticalFilledIcon.svg-B8ybti0_.js";import{S as ce}from"./ImageIcon.svg-IgX9GCoh.js";import{S as w}from"./Select-BuNxC0mK.js";import{P as de}from"./ProgressBar-CUIdQP7m.js";import{D as he}from"./DataTable-whaFcay8.js";import{L as y}from"./List-DxpaJmNy.js";import{M as E,S as ge}from"./Modal-Bmn2ovDN.js";import{S as ue}from"./CollectionIcon.svg-Cg2nuJZe.js";import{S as me}from"./ImportIcon.svg-BseU5CJf.js";import{S as pe}from"./RefreshIcon.svg-dwuhltUX.js";import"./Choice-BHYzD_70.js";import"./context-BTIEeRbG.js";import"./context-xI5rfeLT.js";import"./context-C3Cd1xwR.js";function Ne(){const{products:h}=se(),T=te(),f=ne(),[g,M]=c.useState("seasonal"),[C,U]=c.useState("summer"),[I,J]=c.useState("bestsellers"),[P,X]=c.useState("color"),[S,Y]=c.useState("warm"),[B,q]=c.useState("all"),[R,W]=c.useState(!1),[b,Q]=c.useState([]),[u,z]=c.useState([]),[k,N]=c.useState(""),[L,O]=c.useState(""),[Z,D]=c.useState(!1),_=()=>{W(!0),setTimeout(()=>{let s=[...h],i="",o="";if(g==="seasonal"){const a={summer:["summer","beach","sun","swim","shorts","tank","sandal","light"],winter:["winter","coat","jacket","warm","wool","fleece","boot","thermal"],spring:["spring","floral","pastel","light","fresh","rain"],fall:["fall","autumn","layer","cardigan","sweater","harvest"]}[C]||[];s=h.filter(n=>{const r=`${n.title} ${n.tags.join(" ")} ${n.productType}`.toLowerCase();return a.some(p=>r.includes(p))}),i=`${C.charAt(0).toUpperCase()+C.slice(1)} Collection ${new Date().getFullYear()}`,o=`Curated ${C} essentials featuring seasonal favorites and trending items.`}else if(g==="performance")I==="bestsellers"?(s=h.slice(0,20),i="Bestsellers Collection",o="Our top-performing products loved by customers."):I==="trending"?(s=h.sort((l,a)=>new Date(a.createdAt).getTime()-new Date(l.createdAt).getTime()).slice(0,15),i="Trending Now",o="Discover what's hot and trending in our store."):I==="high-margin"&&(s=h.filter(l=>{var n,r;return parseFloat(((r=(n=l.priceRangeV2)==null?void 0:n.maxVariantPrice)==null?void 0:r.amount)||"0")>50}).slice(0,20),i="Premium Collection",o="Exclusive high-value products for discerning customers.");else if(g==="visual"){if(P==="color"){const a={warm:["red","orange","yellow","gold","amber","coral"],cool:["blue","green","purple","teal","cyan","indigo"],neutral:["black","white","gray","grey","beige","brown"],pastel:["pink","lavender","mint","peach","sky","baby"]}[S]||[];s=h.filter(n=>{const r=`${n.title} ${n.tags.join(" ")}`.toLowerCase();return a.some(p=>r.includes(p))}),i=`${S.charAt(0).toUpperCase()+S.slice(1)} Tones Collection`,o=`Products featuring ${S} color palettes and aesthetics.`}else if(P==="style"){const l=["minimal","vintage","modern","classic","boho"];s=h.filter(a=>{const n=`${a.title} ${a.tags.join(" ")}`.toLowerCase();return l.some(r=>n.includes(r))}).slice(0,20),i="Curated Style Collection",o="Handpicked products that match your aesthetic preferences."}}if(B!=="all"){const[l,a]=B.split("-").map(Number);s=s.filter(n=>{var p,A;const r=parseFloat(((A=(p=n.priceRangeV2)==null?void 0:p.minVariantPrice)==null?void 0:A.amount)||"0");return r>=l&&(a?r<=a:!0)})}Q(s.slice(0,30)),z(s.slice(0,30).map(l=>l.id)),N(i),O(o),W(!1)},2e3)},G=()=>{u.length>0&&k&&T.submit({actionType:"createAICollection",aiType:g,title:k,description:L,productIds:JSON.stringify(u)},{method:"POST"})};c.useEffect(()=>{var s;(s=T.data)!=null&&s.success&&f("/app/collections-enhanced")},[T.data,f]);const ee=b.map(s=>{var i,o,l,a,n,r;return[e.jsx(ae,{checked:u.includes(s.id),onChange:p=>{z(p?[...u,s.id]:u.filter(A=>A!==s.id))}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[((a=(l=(o=(i=s.images)==null?void 0:i.edges)==null?void 0:o[0])==null?void 0:l.node)==null?void 0:a.url)&&e.jsx("img",{src:s.images.edges[0].node.url,alt:s.title,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"4px"}}),e.jsxs("div",{children:[e.jsx(t,{variant:"bodyMd",fontWeight:"semibold",children:s.title}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:s.vendor})]})]}),e.jsx(v,{children:s.productType||"N/A"}),`$${((r=(n=s.priceRangeV2)==null?void 0:n.minVariantPrice)==null?void 0:r.amount)||"0"}`,e.jsxs(v,{tone:"info",children:[s.totalInventory||0," in stock"]})]});return e.jsxs(le,{children:[e.jsx(ie,{title:"AI-Powered Collections"}),e.jsx("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"1.5rem",borderRadius:"12px",marginBottom:"1.5rem"},children:e.jsx(d,{gap:"200",children:e.jsxs(m,{align:"space-between",children:[e.jsxs("div",{children:[e.jsx(t,{as:"h1",variant:"headingXl",children:e.jsx("span",{style:{color:"white",fontWeight:"bold"},children:"AI Collection Generator"})}),e.jsx(t,{variant:"bodyLg",children:e.jsx("span",{style:{color:"rgba(255,255,255,0.9)"},children:"Let AI create smart collections based on data and patterns"})})]}),e.jsx($,{source:K,tone:"base"})]})})}),e.jsxs(F,{children:[e.jsxs(F.Section,{children:[e.jsx(x,{children:e.jsxs(d,{gap:"400",children:[e.jsx(t,{variant:"headingMd",children:"Choose AI Analysis Type"}),e.jsxs(d,{gap:"200",children:[e.jsx(V,{label:e.jsxs(m,{gap:"200",children:[e.jsx($,{source:re}),e.jsxs("div",{children:[e.jsx(t,{variant:"bodyMd",fontWeight:"semibold",children:"Seasonal Collections"}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:"Automatically group products by season and trends"})]})]}),checked:g==="seasonal",onChange:()=>M("seasonal")}),e.jsx(V,{label:e.jsxs(m,{gap:"200",children:[e.jsx($,{source:oe}),e.jsxs("div",{children:[e.jsx(t,{variant:"bodyMd",fontWeight:"semibold",children:"Performance-Based"}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:"Group by sales performance, trending, or margins"})]})]}),checked:g==="performance",onChange:()=>M("performance")}),e.jsx(V,{label:e.jsxs(m,{gap:"200",children:[e.jsx($,{source:ce}),e.jsxs("div",{children:[e.jsx(t,{variant:"bodyMd",fontWeight:"semibold",children:"Visual Similarity"}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:"Group products by colors, styles, or visual themes"})]})]}),checked:g==="visual",onChange:()=>M("visual")})]}),g==="seasonal"&&e.jsx(x,{sectioned:!0,children:e.jsx(d,{gap:"300",children:e.jsx(w,{label:"Select Season",options:[{label:"Summer",value:"summer"},{label:"Winter",value:"winter"},{label:"Spring",value:"spring"},{label:"Fall/Autumn",value:"fall"}],value:C,onChange:U})})}),g==="performance"&&e.jsx(x,{sectioned:!0,children:e.jsx(d,{gap:"300",children:e.jsx(w,{label:"Performance Metric",options:[{label:"Bestsellers",value:"bestsellers"},{label:"Trending Now",value:"trending"},{label:"High Margin Products",value:"high-margin"}],value:I,onChange:J})})}),g==="visual"&&e.jsx(x,{sectioned:!0,children:e.jsxs(d,{gap:"300",children:[e.jsx(w,{label:"Visual Grouping",options:[{label:"By Color Theme",value:"color"},{label:"By Style",value:"style"}],value:P,onChange:X}),P==="color"&&e.jsx(w,{label:"Color Theme",options:[{label:"Warm Tones",value:"warm"},{label:"Cool Tones",value:"cool"},{label:"Neutral Tones",value:"neutral"},{label:"Pastel Tones",value:"pastel"}],value:S,onChange:Y})]})}),e.jsx(w,{label:"Price Range Filter (Optional)",options:[{label:"All Prices",value:"all"},{label:"Under $25",value:"0-25"},{label:"$25 - $50",value:"25-50"},{label:"$50 - $100",value:"50-100"},{label:"Over $100",value:"100-9999"}],value:B,onChange:q}),e.jsx(j,{variant:"primary",size:"large",fullWidth:!0,onClick:_,loading:R,icon:K,children:R?"Analyzing Products...":"Generate AI Collection"}),R&&e.jsxs(d,{gap:"200",children:[e.jsx(de,{progress:75}),e.jsx(t,{variant:"bodySm",alignment:"center",children:"AI is analyzing your products and creating smart groupings..."})]})]})}),b.length>0&&e.jsx(x,{children:e.jsxs(d,{gap:"400",children:[e.jsxs(m,{align:"space-between",children:[e.jsx(t,{variant:"headingMd",children:"AI Suggested Products"}),e.jsxs(v,{tone:"success",children:[u.length," of ",b.length," selected"]})]}),e.jsx(H,{label:"Collection Title",value:k,onChange:N}),e.jsx(H,{label:"Collection Description",value:L,onChange:O,multiline:3}),e.jsx(he,{columnContentTypes:["text","text","text","text","text"],headings:["Select","Product","Type","Price","Inventory"],rows:ee}),e.jsxs(m,{gap:"200",children:[e.jsxs(j,{variant:"primary",size:"large",onClick:G,loading:T.state==="submitting",disabled:u.length===0,children:["Create Collection with ",u.length," Products"]}),e.jsx(j,{onClick:()=>D(!0),children:"Preview Collection"})]})]})})]}),e.jsxs(F.Section,{variant:"oneThird",children:[e.jsx(x,{children:e.jsxs(d,{gap:"400",children:[e.jsx(t,{variant:"headingMd",children:"AI Insights"}),e.jsxs(d,{gap:"200",children:[e.jsxs(m,{align:"space-between",children:[e.jsx(t,{variant:"bodySm",children:"Total Products"}),e.jsx(v,{children:h.length})]}),e.jsxs(m,{align:"space-between",children:[e.jsx(t,{variant:"bodySm",children:"Products Analyzed"}),e.jsx(v,{tone:"info",children:b.length})]}),e.jsxs(m,{align:"space-between",children:[e.jsx(t,{variant:"bodySm",children:"Match Rate"}),e.jsxs(v,{tone:"success",children:[h.length>0?Math.round(b.length/h.length*100):0,"%"]})]})]})]})}),e.jsx(x,{children:e.jsxs(d,{gap:"300",children:[e.jsx(t,{variant:"headingMd",children:"How It Works"}),e.jsxs(y,{type:"number",children:[e.jsx(y.Item,{children:e.jsx(t,{variant:"bodySm",children:"Choose an AI analysis type that fits your needs"})}),e.jsx(y.Item,{children:e.jsx(t,{variant:"bodySm",children:"Configure specific parameters for the analysis"})}),e.jsx(y.Item,{children:e.jsx(t,{variant:"bodySm",children:"AI analyzes your products and suggests groupings"})}),e.jsx(y.Item,{children:e.jsx(t,{variant:"bodySm",children:"Review and customize the suggested collection"})}),e.jsx(y.Item,{children:e.jsx(t,{variant:"bodySm",children:"Create the collection with one click"})})]})]})})]})]}),e.jsx(E,{open:Z,onClose:()=>D(!1),title:"Collection Preview",primaryAction:{content:"Create Collection",onAction:G},secondaryActions:[{content:"Close",onAction:()=>D(!1)}],children:e.jsx(E.Section,{children:e.jsxs(d,{gap:"400",children:[e.jsx(t,{variant:"headingLg",children:k}),e.jsx(t,{children:L}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px"},children:u.slice(0,6).map(s=>{var o,l,a,n;const i=b.find(r=>r.id===s);return(n=(a=(l=(o=i==null?void 0:i.images)==null?void 0:o.edges)==null?void 0:l[0])==null?void 0:a.node)!=null&&n.url?e.jsx("img",{src:i.images.edges[0].node.url,alt:i.title,style:{width:"100%",height:"100px",objectFit:"cover",borderRadius:"8px"}},s):null})}),e.jsxs(t,{variant:"bodySm",tone:"subdued",children:[u.length," products will be added to this collection"]})]})})}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",padding:"1rem",boxShadow:"0 -4px 20px rgba(0,0,0,0.2)",zIndex:1e3},children:e.jsxs(m,{align:"center",gap:"400",children:[e.jsx(j,{size:"large",icon:ge,onClick:()=>f("/app"),children:"Home"}),e.jsx(j,{size:"large",icon:ue,onClick:()=>f("/app/collections-enhanced"),children:"Collections"}),e.jsx(j,{size:"large",icon:me,onClick:()=>f("/app/bulk-operations"),children:"Bulk Ops"}),e.jsx(j,{size:"large",icon:pe,onClick:()=>window.location.reload(),children:"Refresh"})]})}),e.jsx("div",{style:{paddingBottom:"100px"}})]})}export{Ne as default};
