import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{R as g,u as G,b as J,c as K,r as o}from"./components-DK7TFnBr.js";import{P as _,B as n}from"./Page-BePJ91lz.js";import{T as ee}from"./TitleBar-aGDsqF3i.js";import{b as s,c as i,T as t,I as u,C as j,B as l,d as v,a as ae}from"./ButtonGroup-DgNny8n-.js";import{L as M}from"./Layout-CR-2O1w0.js";import{S as F}from"./CalendarIcon.svg-Dnb3FKdo.js";import{E as te}from"./EmptyState-B0o5Meh0.js";import{S as L}from"./RefreshIcon.svg-dwuhltUX.js";import{S as se,a as ne}from"./EditIcon.svg-BMATWsJy.js";import{D as ie}from"./DataTable-whaFcay8.js";import{a as T}from"./CheckIcon.svg-DaHPfNLC.js";import{M as U,S as le}from"./Modal-Bmn2ovDN.js";import{S as R}from"./Select-BuNxC0mK.js";import{C as re}from"./Checkbox-9GjnhRMy.js";import{B as ce}from"./Banner-Bed-1WKG.js";import{S as oe}from"./CollectionIcon.svg-Cg2nuJZe.js";import{S as de}from"./ImportIcon.svg-BseU5CJf.js";import{S as he}from"./MagicIcon.svg-Cq1XyIoH.js";import{S as ue}from"./ChartVerticalFilledIcon.svg-B8ybti0_.js";import"./context-BTIEeRbG.js";import"./context-xI5rfeLT.js";import"./context-C3Cd1xwR.js";import"./Choice-BHYzD_70.js";import"./InfoIcon.svg-DN5ziCfk.js";var $=function(c){return g.createElement("svg",Object.assign({viewBox:"0 0 20 20"},c),g.createElement("path",{d:"M10.75 6a.75.75 0 0 0-1.5 0v4c0 .199.079.39.22.53l2 2a.75.75 0 1 0 1.06-1.06l-1.78-1.78v-3.69Z"}),g.createElement("path",{fillRule:"evenodd",d:"M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Zm-1.5 0a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0Z"}))};$.displayName="ClockIcon";var B=function(c){return g.createElement("svg",Object.assign({viewBox:"0 0 20 20"},c),g.createElement("path",{fillRule:"evenodd",d:"M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Zm-3.677 4.383a5.5 5.5 0 0 1-7.706-7.706l7.706 7.706Zm1.06-1.06-7.706-7.706a5.5 5.5 0 0 1 7.706 7.706Z"}))};B.displayName="DisabledIcon";var E=function(c){return g.createElement("svg",Object.assign({viewBox:"0 0 20 20"},c),g.createElement("path",{fillRule:"evenodd",d:"M15.375 8.485c1.167.674 1.167 2.358 0 3.031l-7.5 4.33c-1.167.674-2.625-.168-2.625-1.515v-8.66c0-1.348 1.458-2.19 2.625-1.516l7.5 4.33Zm-.75 1.732a.25.25 0 0 0 0-.433l-7.5-4.33a.25.25 0 0 0-.375.217v8.66a.25.25 0 0 0 .375.216l7.5-4.33Z"}))};E.displayName="PlayIcon";function Fe(){var Z;const{collections:b,scheduledTasks:c}=G(),d=J(),m=K(),[H,r]=o.useState(!1),[f,P]=o.useState(""),[x,h]=o.useState("activate"),[ge,pe]=o.useState({month:new Date().getMonth(),year:new Date().getFullYear()}),[S,A]=o.useState(""),[y,p]=o.useState(!1),[C,k]=o.useState("daily"),[z,N]=o.useState(null),Q=()=>{f&&S&&(d.submit({actionType:"scheduleTask",collectionId:f,taskType:x,scheduledDate:S,isRecurring:y.toString(),recurringInterval:C},{method:"POST"}),r(!1),w())},X=a=>{d.submit({actionType:"deleteTask",taskId:a},{method:"POST"})},q=a=>{d.submit({actionType:"pauseTask",taskId:a},{method:"POST"})},V=a=>{d.submit({actionType:"resumeTask",taskId:a},{method:"POST"})},w=()=>{P(""),h("activate"),A(""),p(!1),k("daily"),N(null)},Y=a=>{switch(a){case"activate":return E;case"deactivate":return B;case"refresh":return L;default:return F}},O=a=>{switch(a){case"activate":return e.jsx(n,{tone:"success",children:"Activate"});case"deactivate":return e.jsx(n,{tone:"warning",children:"Deactivate"});case"refresh":return e.jsx(n,{tone:"info",children:"Refresh"});default:return e.jsx(n,{children:a})}},W=a=>{switch(a){case"active":return e.jsx(n,{tone:"success",children:"Active"});case"pending":return e.jsx(n,{children:"Pending"});case"paused":return e.jsx(n,{tone:"warning",children:"Paused"});case"completed":return e.jsx(n,{tone:"info",children:"Completed"});default:return e.jsx(n,{children:a})}},I=c.filter(a=>a.status==="pending"||a.status==="active"),D=c.filter(a=>a.status==="completed");return o.useEffect(()=>{var a;(a=d.data)!=null&&a.success&&window.location.reload()},[d.data]),e.jsxs(_,{children:[e.jsx(ee,{title:"Collection Scheduling"}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)",padding:"2rem",borderRadius:"16px",marginBottom:"1.5rem",position:"relative",overflow:"hidden"},children:[e.jsx("style",{children:`
            @keyframes clockTick {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
            
            .clock-icon {
              animation: clockTick 60s linear infinite;
            }
            
            .task-card {
              transition: all 0.3s ease;
              cursor: pointer;
            }
            
            .task-card:hover {
              transform: translateX(10px);
              box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            }
            
            .pulse-dot {
              width: 10px;
              height: 10px;
              background: #10b981;
              border-radius: 50%;
              animation: pulse 2s ease-in-out infinite;
            }
            
            @keyframes pulse {
              0%, 100% { transform: scale(1); opacity: 1; }
              50% { transform: scale(1.5); opacity: 0.5; }
            }
          `}),e.jsxs(s,{gap:"400",children:[e.jsxs(i,{align:"space-between",children:[e.jsxs("div",{children:[e.jsx(t,{as:"h1",variant:"headingXl",children:e.jsx("span",{style:{color:"white",fontWeight:"bold"},children:"Scheduling Center"})}),e.jsx(t,{variant:"bodyLg",children:e.jsx("span",{style:{color:"rgba(255,255,255,0.9)"},children:"Automate collection management with smart scheduling"})})]}),e.jsx("div",{className:"clock-icon",children:e.jsx(u,{source:$,tone:"base"})})]}),e.jsxs(i,{gap:"200",children:[e.jsxs(n,{tone:"success",children:[I.length," Active"]}),e.jsxs(n,{tone:"info",children:[c.filter(a=>a.recurring).length," Recurring"]}),e.jsxs(n,{children:[D.length," Completed"]})]})]})]}),e.jsxs(M,{children:[e.jsxs(M.Section,{children:[e.jsx(j,{children:e.jsxs(s,{gap:"400",children:[e.jsxs(i,{align:"space-between",children:[e.jsx(t,{variant:"headingMd",children:"Scheduled Tasks"}),e.jsx(l,{variant:"primary",icon:F,onClick:()=>r(!0),children:"Schedule New Task"})]}),I.length===0?e.jsx(te,{heading:"No scheduled tasks",image:"https://cdn.shopify.com/s/files/1/0262/4071/2726/files/emptystate-files.png",children:e.jsx("p",{children:"Schedule automatic collection management tasks"})}):e.jsx(s,{gap:"300",children:I.map(a=>e.jsx("div",{className:"task-card",children:e.jsx(v,{padding:"400",background:"bg-surface",borderWidth:"025",borderColor:"border",borderRadius:"200",children:e.jsxs(i,{align:"space-between",children:[e.jsxs(i,{gap:"300",align:"center",children:[a.status==="active"&&e.jsx("div",{className:"pulse-dot"}),e.jsx(u,{source:Y(a.type)}),e.jsxs("div",{children:[e.jsx(t,{variant:"bodyMd",fontWeight:"semibold",children:a.collectionTitle}),e.jsxs(i,{gap:"200",children:[O(a.type),a.recurring&&e.jsx(n,{tone:"info",children:e.jsxs(i,{gap:"050",children:[e.jsx(u,{source:L}),a.recurringInterval]})}),W(a.status)]})]})]}),e.jsx("div",{children:e.jsxs(s,{gap:"100",children:[e.jsxs(t,{variant:"bodySm",tone:"subdued",children:["Scheduled: ",new Date(a.scheduledDate).toLocaleString()]}),e.jsxs(i,{gap:"100",children:[a.status==="active"?e.jsx(l,{size:"slim",icon:B,onClick:()=>q(a.id),children:"Pause"}):e.jsx(l,{size:"slim",icon:E,onClick:()=>V(a.id),children:"Resume"}),e.jsx(l,{size:"slim",icon:se,onClick:()=>{N(a),r(!0)},children:"Edit"}),e.jsx(l,{size:"slim",tone:"critical",icon:ne,onClick:()=>X(a.id),children:"Delete"})]})]})})]})})},a.id))})]})}),D.length>0&&e.jsx(j,{children:e.jsxs(s,{gap:"400",children:[e.jsx(t,{variant:"headingMd",children:"Completed Tasks"}),e.jsx(ie,{columnContentTypes:["text","text","text","text"],headings:["Collection","Task","Completed","Status"],rows:D.map(a=>[a.collectionTitle,O(a.type),new Date(a.scheduledDate).toLocaleDateString(),W(a.status)])})]})})]}),e.jsx(M.Section,{variant:"oneThird",children:e.jsxs(s,{gap:"400",children:[e.jsx(j,{children:e.jsxs(s,{gap:"300",children:[e.jsx(t,{variant:"headingMd",children:"Quick Schedule"}),e.jsxs(s,{gap:"200",children:[e.jsx(l,{fullWidth:!0,onClick:()=>{h("activate"),r(!0)},children:"Activate Collection"}),e.jsx(l,{fullWidth:!0,onClick:()=>{h("deactivate"),r(!0)},children:"Deactivate Collection"}),e.jsx(l,{fullWidth:!0,onClick:()=>{h("refresh"),p(!0),r(!0)},children:"Set Recurring Refresh"})]})]})}),e.jsx(j,{children:e.jsxs(s,{gap:"300",children:[e.jsx(t,{variant:"headingMd",children:"Automation Benefits"}),e.jsxs(s,{gap:"200",children:[e.jsxs(i,{gap:"200",children:[e.jsx(u,{source:T,tone:"success"}),e.jsx(t,{variant:"bodyMd",children:"Save time on manual tasks"})]}),e.jsxs(i,{gap:"200",children:[e.jsx(u,{source:T,tone:"success"}),e.jsx(t,{variant:"bodyMd",children:"Never miss important dates"})]}),e.jsxs(i,{gap:"200",children:[e.jsx(u,{source:T,tone:"success"}),e.jsx(t,{variant:"bodyMd",children:"Optimize for peak times"})]}),e.jsxs(i,{gap:"200",children:[e.jsx(u,{source:T,tone:"success"}),e.jsx(t,{variant:"bodyMd",children:"Consistent updates"})]})]})]})}),e.jsx(j,{children:e.jsxs(s,{gap:"300",children:[e.jsx(t,{variant:"headingMd",children:"Schedule Templates"}),e.jsxs(s,{gap:"200",children:[e.jsx(v,{padding:"200",background:"bg-surface-neutral-subdued",borderRadius:"200",onClick:()=>{h("activate"),p(!1),r(!0)},style:{cursor:"pointer"},children:e.jsxs(s,{gap:"100",children:[e.jsx(t,{variant:"bodyMd",fontWeight:"semibold",children:"Weekend Sale"}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:"Activate Friday, deactivate Monday"})]})}),e.jsx(v,{padding:"200",background:"bg-surface-neutral-subdued",borderRadius:"200",onClick:()=>{h("refresh"),p(!0),k("daily"),r(!0)},style:{cursor:"pointer"},children:e.jsxs(s,{gap:"100",children:[e.jsx(t,{variant:"bodyMd",fontWeight:"semibold",children:"Daily Refresh"}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:"Update collection every morning"})]})}),e.jsx(v,{padding:"200",background:"bg-surface-neutral-subdued",borderRadius:"200",onClick:()=>{h("activate"),p(!0),k("monthly"),r(!0)},style:{cursor:"pointer"},children:e.jsxs(s,{gap:"100",children:[e.jsx(t,{variant:"bodyMd",fontWeight:"semibold",children:"Monthly Feature"}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:"Rotate featured collection monthly"})]})})]})]})})]})})]}),e.jsx(U,{open:H,onClose:()=>{r(!1),w()},title:z?"Edit Scheduled Task":"Schedule New Task",primaryAction:{content:z?"Update Task":"Schedule Task",onAction:Q,disabled:!f||!S},secondaryActions:[{content:"Cancel",onAction:()=>{r(!1),w()}}],children:e.jsx(U.Section,{children:e.jsxs(s,{gap:"400",children:[e.jsx(R,{label:"Select Collection",options:[{label:"Choose collection...",value:""},...b.map(a=>({label:`${a.title} (${a.productsCount} products)`,value:a.id}))],value:f,onChange:P}),e.jsx(R,{label:"Task Type",options:[{label:"Activate Collection",value:"activate"},{label:"Deactivate Collection",value:"deactivate"},{label:"Refresh Products",value:"refresh"},{label:"Update SEO",value:"update-seo"},{label:"Change Sort Order",value:"change-sort"}],value:x,onChange:h}),e.jsx(ae,{label:"Date & Time",type:"datetime-local",value:S,onChange:A,helpText:"Schedule when this task should run"}),e.jsx(re,{label:"Make this a recurring task",checked:y,onChange:p}),y&&e.jsx(R,{label:"Recurring Interval",options:[{label:"Daily",value:"daily"},{label:"Weekly",value:"weekly"},{label:"Bi-weekly",value:"biweekly"},{label:"Monthly",value:"monthly"},{label:"Quarterly",value:"quarterly"}],value:C,onChange:k}),e.jsx(v,{padding:"300",background:"bg-surface-info-subdued",borderRadius:"200",children:e.jsxs(s,{gap:"200",children:[e.jsx(t,{variant:"headingSm",children:"Task Preview"}),e.jsxs(t,{variant:"bodySm",children:[x==="activate"&&"This collection will be made visible to customers",x==="deactivate"&&"This collection will be hidden from customers",x==="refresh"&&"Products in this collection will be refreshed",y&&` and will repeat ${C}`]})]})})]})})}),((Z=d.data)==null?void 0:Z.success)&&e.jsx(ce,{tone:"success",onDismiss:()=>{},children:d.data.message}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",padding:"1rem",boxShadow:"0 -4px 20px rgba(0,0,0,0.2)",zIndex:1e3},children:e.jsxs(i,{align:"center",gap:"400",children:[e.jsx(l,{size:"large",icon:le,onClick:()=>m("/app"),children:"Home"}),e.jsx(l,{size:"large",icon:oe,onClick:()=>m("/app/collections-enhanced"),children:"Collections"}),e.jsx(l,{size:"large",icon:de,onClick:()=>m("/app/bulk-operations"),children:"Bulk Ops"}),e.jsx(l,{size:"large",icon:he,onClick:()=>m("/app/ai-collections"),children:"AI Magic"}),e.jsx(l,{size:"large",icon:ue,onClick:()=>m("/app/analytics"),children:"Analytics"})]})}),e.jsx("div",{style:{paddingBottom:"100px"}})]})}export{Fe as default};
