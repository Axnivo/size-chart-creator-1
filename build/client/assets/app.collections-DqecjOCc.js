import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{u as M,b as R,c as V,r as l}from"./components-DK7TFnBr.js";import{T as F}from"./Thumbnail-I9kuQQRJ.js";import{I as f,T as a,c as h,B as o,b as d,C as B,a as C}from"./ButtonGroup-DgNny8n-.js";import{S as N}from"./CollectionIcon.svg-Cg2nuJZe.js";import{B as b,P as Q,S as D}from"./Page-BePJ91lz.js";import{S as q,a as U}from"./EditIcon.svg-BMATWsJy.js";import{T as X}from"./TitleBar-aGDsqF3i.js";import{S as z,M as u}from"./Modal-Bmn2ovDN.js";import{L as S,T as G}from"./Layout-CR-2O1w0.js";import{B as L}from"./Banner-Bed-1WKG.js";import{E as J}from"./EmptyState-B0o5Meh0.js";import{D as K}from"./DataTable-whaFcay8.js";import{S as Y}from"./PlusIcon.svg-BfuTfPyI.js";import{S as Z}from"./RefreshIcon.svg-dwuhltUX.js";import{S as _}from"./ImportIcon.svg-BseU5CJf.js";import"./context-BTIEeRbG.js";import"./context-xI5rfeLT.js";import"./context-C3Cd1xwR.js";import"./InfoIcon.svg-DN5ziCfk.js";import"./CheckIcon.svg-DaHPfNLC.js";function be(){var I,E;const{collections:s,error:y}=M(),i=R(),n=V(),[m,v]=l.useState(""),[x,p]=l.useState(null),[g,T]=l.useState(""),[k,w]=l.useState(""),[j,c]=l.useState(null),A=(s==null?void 0:s.filter(t=>t?(t.title||"").toLowerCase().includes(m.toLowerCase())||(t.handle||"").toLowerCase().includes(m.toLowerCase()):!1))||[],O=t=>{var r;p(t),T(t.title),w(((r=t.descriptionHtml)==null?void 0:r.replace(/<[^>]*>/g,""))||"")},P=()=>{x&&g.trim()&&i.submit({actionType:"update",collectionId:x.id,title:g.trim(),description:k.trim()},{method:"POST"})},W=t=>{i.submit({actionType:"delete",collectionId:t},{method:"POST"}),c(null)};l.useEffect(()=>{var t,r;(t=i.data)!=null&&t.success?(p(null),c(null),setTimeout(()=>{window.location.reload()},500)):(r=i.data)!=null&&r.error&&console.error("Action failed:",i.data.error)},[i.data]);const H=A.map(t=>{var r;return[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(r=t.image)!=null&&r.url?e.jsx(F,{source:t.image.url,alt:t.image.altText||t.title,size:"small"}):e.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(f,{source:N,tone:"base"})}),e.jsxs("div",{children:[e.jsx(a,{variant:"bodyMd",fontWeight:"semibold",children:t.title}),e.jsxs(a,{variant:"bodySm",tone:"subdued",children:["/",t.handle]})]})]}),e.jsxs(b,{tone:"info",children:[t.productsCount||0," products"]}),new Date(t.updatedAt).toLocaleDateString(),e.jsxs(h,{gap:"200",align:"center",children:[e.jsx(o,{size:"slim",icon:q,onClick:()=>O(t),children:"Edit"}),e.jsx(o,{size:"slim",tone:"critical",icon:U,onClick:()=>c(t.id),children:"Delete"})]})]});return e.jsxs(Q,{children:[e.jsx(X,{title:"Collections",primaryAction:{content:"Create Collection",onAction:()=>n("/app")},secondaryActions:[{content:"Home",onAction:()=>n("/app")},{content:"View Collections",onAction:()=>n("/app/collections-enhanced")},{content:"Bulk Operations",onAction:()=>n("/app/bulk-operations")},{content:"SEO Tools",onAction:()=>n("/app/seo-tools")}]}),e.jsxs("div",{style:{width:"100%",marginBottom:"1rem",display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem"},children:[e.jsxs(o,{variant:"primary",size:"large",fullWidth:!0,onClick:()=>n("/app"),children:[e.jsx(f,{source:z})," Home"]}),e.jsx(o,{size:"large",fullWidth:!0,onClick:()=>n("/app/collections-enhanced"),children:"View Collections"}),e.jsx(o,{size:"large",fullWidth:!0,onClick:()=>n("/app/bulk-operations"),children:"Bulk Operations"}),e.jsx(o,{size:"large",fullWidth:!0,onClick:()=>n("/app/seo-tools"),children:"SEO Tools"})]}),e.jsx("div",{style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #ec4899 100%)",padding:"1.5rem",borderRadius:"12px",marginBottom:"1.5rem",boxShadow:"0 10px 40px rgba(0,0,0,0.1)"},children:e.jsxs(d,{gap:"200",children:[e.jsx(a,{as:"h1",variant:"headingXl",children:e.jsx("span",{style:{color:"white",fontWeight:"bold"},children:"Manage Collections"})}),e.jsx(a,{variant:"bodyLg",children:e.jsx("span",{style:{color:"rgba(255,255,255,0.9)"},children:"View and manage all your store collections"})})]})}),e.jsxs(S,{children:[e.jsx(S.Section,{children:e.jsx(B,{children:e.jsxs(d,{gap:"400",children:[e.jsx(C,{label:"",placeholder:"Search collections...",value:m,onChange:v,prefix:e.jsx(f,{source:D}),clearButton:!0,onClearButtonClick:()=>v("")}),y?e.jsx(L,{tone:"critical",children:e.jsx("p",{children:y})}):null,((I=i.data)==null?void 0:I.error)&&!((E=i.data)!=null&&E.success)&&e.jsx(L,{tone:"critical",children:e.jsxs("p",{children:["Action failed: ",i.data.error]})}),A.length===0?e.jsx(J,{heading:"No collections found",image:"https://cdn.shopify.com/s/files/1/0262/4071/2726/files/emptystate-files.png",children:e.jsx("p",{children:"Start by creating your first collection using the button below."})}):e.jsx(K,{columnContentTypes:["text","text","text","text"],headings:["Collection","Products","Last Updated","Actions"],rows:H})]})})}),e.jsx(S.Section,{variant:"oneThird",children:e.jsx(B,{children:e.jsxs(d,{gap:"400",children:[e.jsx(a,{variant:"headingMd",as:"h3",children:"Collection Stats"}),e.jsxs(d,{gap:"200",children:[e.jsxs(h,{align:"space-between",children:[e.jsx(a,{variant:"bodySm",children:"Total Collections"}),e.jsx(b,{tone:"success",children:(s==null?void 0:s.length)||0})]}),e.jsxs(h,{align:"space-between",children:[e.jsx(a,{variant:"bodySm",children:"Active Collections"}),e.jsx(b,{tone:"info",children:(s==null?void 0:s.filter(t=>((t==null?void 0:t.productsCount)||0)>0).length)||0})]})]})]})})})]}),e.jsx(u,{open:!!x,onClose:()=>p(null),title:"Edit Collection",primaryAction:{content:"Save",onAction:P,loading:i.state==="submitting"},secondaryActions:[{content:"Cancel",onAction:()=>p(null)}],children:e.jsx(u.Section,{children:e.jsxs(d,{gap:"400",children:[e.jsx(C,{label:"Collection Title",value:g,onChange:T,autoComplete:"off"}),e.jsx(C,{label:"Description",value:k,onChange:w,multiline:4,autoComplete:"off"})]})})}),e.jsx(u,{open:!!j,onClose:()=>c(null),title:"Delete Collection?",primaryAction:{content:"Delete",onAction:()=>j&&W(j),destructive:!0,loading:i.state==="submitting"},secondaryActions:[{content:"Cancel",onAction:()=>c(null)}],children:e.jsx(u.Section,{children:e.jsx(G,{children:e.jsx("p",{children:"Are you sure you want to delete this collection? This action cannot be undone."})})})}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",padding:"1rem",boxShadow:"0 -4px 20px rgba(0,0,0,0.2)",backdropFilter:"blur(10px)",zIndex:999,borderTop:"2px solid rgba(99, 102, 241, 0.3)"},children:e.jsxs(h,{align:"center",gap:"400",children:[e.jsx(o,{size:"large",icon:z,onClick:()=>n("/app"),children:"Home"}),e.jsx(o,{size:"large",variant:"primary",icon:Y,onClick:()=>n("/app"),children:"Create Collection"}),e.jsx(o,{size:"large",icon:Z,onClick:()=>window.location.reload(),children:"Refresh"}),e.jsx(o,{size:"large",icon:D,onClick:()=>{const t=document.querySelector('input[placeholder="Search collections..."]');t&&(t.focus(),t.scrollIntoView({behavior:"smooth",block:"center"}))},children:"Search"}),e.jsx(o,{size:"large",icon:_,onClick:()=>n("/app/collections-enhanced"),children:"Enhanced View"})]})}),e.jsx("div",{style:{paddingBottom:"100px"}})]})}export{be as default};
