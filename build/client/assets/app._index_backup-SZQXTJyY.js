import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{b as G,c as J,r as o}from"./components-DK7TFnBr.js";import{a as K}from"./app-C4gGeqNa.js";import{u as X}from"./useAppBridge-Bj34gXAL.js";import{P as Y}from"./Page-BePJ91lz.js";import{T as Z}from"./TitleBar-aGDsqF3i.js";import{c as g,I as V,b as n,T as a,B as r,d as f,C as p,a as S}from"./ButtonGroup-DgNny8n-.js";import{S as k}from"./MagicIcon.svg-Cq1XyIoH.js";import{S as H}from"./ViewIcon.svg-CCtJaB3j.js";import{P as _}from"./ProgressBar-CUIdQP7m.js";import{B as I}from"./Banner-Bed-1WKG.js";import{S as ee,a as ie}from"./CheckIcon.svg-DaHPfNLC.js";import{L as E}from"./Layout-CR-2O1w0.js";import{R as N}from"./RadioButton-DplwoY6N.js";import{C as O}from"./Checkbox-9GjnhRMy.js";import{S as te}from"./ImageIcon.svg-IgX9GCoh.js";import{S as ne}from"./Select-BuNxC0mK.js";import{S as ae}from"./PlusIcon.svg-BfuTfPyI.js";import{S as oe}from"./RefreshIcon.svg-dwuhltUX.js";import"./context-BTIEeRbG.js";import"./context-xI5rfeLT.js";import"./InfoIcon.svg-DN5ziCfk.js";import"./Choice-BHYzD_70.js";const ze=()=>[{rel:"stylesheet",href:K}];function Ae(){var F,L,$;const t=G(),v=J(),{stats:se}=t.data||{},[s,P]=o.useState(""),[u,B]=o.useState(""),[x,C]=o.useState("manual"),[d,M]=o.useState(""),[h,z]=o.useState(""),[c,y]=o.useState(""),[m,A]=o.useState({online:!0,pos:!1}),[D,w]=o.useState(""),[j,b]=o.useState(0),[le,re]=o.useState(null),[T,W]=o.useState(!1),R=X(),l=["loading","submitting"].includes(t.state)&&t.formMethod==="POST",q=o.useCallback(()=>{if(!s.trim()){w("Collection name is required");return}w(""),b(0);const i={title:s,description:u,collectionType:x};d&&(i.seoTitle=d),h&&(i.seoDescription=h),c&&(i.handle=c),t.submit(i,{method:"POST"})},[s,u,x,d,h,c,t]);return o.useEffect(()=>{if(s&&!c){const i=s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");y(i)}},[s,c]),o.useEffect(()=>{var i;if(l){const U=setInterval(()=>{b(Q=>Math.min(Q+10,90))},200);return()=>clearInterval(U)}else(i=t.data)!=null&&i.success&&(b(100),P(""),B(""),M(""),z(""),y(""),C("manual"),R.toast.show(`âœ¨ Collection '${t.data.collection.title}' created successfully!`),setTimeout(()=>b(0),2e3))},[t.data,R,l]),e.jsxs(Y,{children:[e.jsx(Z,{title:"Add Collection",children:e.jsx("button",{variant:"primary",onClick:()=>v("/app/collections"),children:"View Collections"})}),e.jsx("div",{style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #ec4899 100%)",padding:"1rem",borderRadius:"12px",marginBottom:"1.5rem",boxShadow:"0 10px 40px rgba(0,0,0,0.1)"},children:e.jsxs(g,{align:"space-between",children:[e.jsxs(g,{gap:"300",children:[e.jsx("div",{style:{background:"rgba(255,255,255,0.2)",padding:"8px",borderRadius:"8px",display:"flex",alignItems:"center"},children:e.jsx(V,{source:k,tone:"base"})}),e.jsxs(n,{gap:"100",children:[e.jsx(a,{as:"h2",variant:"headingLg",tone:"inherit",children:e.jsx("span",{style:{color:"white",fontWeight:"bold"},children:"Create Collection"})}),e.jsx(a,{variant:"bodySm",children:e.jsx("span",{style:{color:"rgba(255,255,255,0.9)"},children:"Add a new collection to organize your products"})})]})]}),e.jsxs(g,{gap:"300",children:[e.jsx(r,{variant:"secondary",size:"large",onClick:()=>v("/app/collections"),icon:H,children:"View Collections"}),e.jsx(r,{variant:"primary",tone:"success",size:"large",loading:l,onClick:q,disabled:!s.trim(),icon:k,children:"Create Collection"})]})]})}),e.jsxs(n,{gap:"500",children:[j>0&&j<100&&e.jsxs(f,{paddingBlockEnd:"400",children:[e.jsx(_,{progress:j,tone:"primary"}),e.jsxs(a,{variant:"bodySm",tone:"subdued",alignment:"center",children:["Creating your collection... ",j,"%"]})]}),((F=t.data)==null?void 0:F.error)&&!l&&e.jsx(I,{title:"Error creating collection",tone:"critical",icon:ee,onDismiss:()=>{},children:e.jsx("p",{children:t.data.error})}),D&&e.jsx(I,{title:"Validation Error",tone:"warning",onDismiss:()=>w(""),children:e.jsx("p",{children:D})}),((L=t.data)==null?void 0:L.success)&&(($=t.data)==null?void 0:$.collection)&&!l&&e.jsx("div",{className:"success-animation",children:e.jsxs(I,{title:"Success!",tone:"success",icon:ie,children:[e.jsxs("p",{children:['Collection "',t.data.collection.title,'" created successfully!']}),t.data.collection.url&&e.jsx(r,{url:t.data.collection.url,external:!0,variant:"plain",size:"slim",children:"View in Shopify Admin"})]})}),e.jsxs(E,{children:[e.jsx(E.Section,{children:e.jsxs(n,{gap:"500",children:[e.jsx(p,{children:e.jsxs(n,{gap:"400",children:[e.jsx(S,{label:"Title",value:s,onChange:P,placeholder:"e.g., Summer collection, Under $100, Staff picks",autoComplete:"off",disabled:l,requiredIndicator:!0}),e.jsxs("div",{children:[e.jsx(a,{variant:"bodyMd",as:"p",fontWeight:"semibold",children:"Description"}),e.jsx("div",{style:{marginTop:"0.5rem",border:"1px solid #ddd",borderRadius:"4px",minHeight:"120px",padding:"12px",background:"#fff"},children:e.jsx("textarea",{value:u,onChange:i=>B(i.target.value),placeholder:"Describe your collection...",style:{width:"100%",minHeight:"100px",border:"none",outline:"none",resize:"vertical",fontFamily:"inherit",fontSize:"14px"},disabled:l})})]})]})}),e.jsx(p,{children:e.jsxs(n,{gap:"400",children:[e.jsx(a,{variant:"headingMd",as:"h3",children:"Collection type"}),e.jsxs(n,{gap:"300",children:[e.jsx(f,{children:e.jsx(N,{label:"Manual",helpText:"Add products to this collection one by one.",checked:x==="manual",id:"manual",name:"collectionType",onChange:()=>C("manual")})}),e.jsx(f,{children:e.jsx(N,{label:"Smart",helpText:"Existing and future products that match the conditions you set will automatically be added to this collection.",checked:x==="smart",id:"smart",name:"collectionType",onChange:()=>C("smart")})})]})]})}),e.jsx(p,{children:e.jsxs(n,{gap:"400",children:[e.jsxs(g,{align:"space-between",children:[e.jsx(a,{variant:"headingMd",as:"h3",children:"Search engine listing"}),e.jsx(r,{variant:"plain",onClick:()=>W(!T),children:T?"Hide preview":"Edit website SEO"})]}),T&&e.jsxs(e.Fragment,{children:[e.jsx(f,{background:"bg-surface-secondary",padding:"400",borderRadius:"200",children:e.jsxs(n,{gap:"200",children:[e.jsx(a,{variant:"bodySm",tone:"subdued",children:"Preview"}),e.jsx(a,{variant:"bodyMd",fontWeight:"semibold",tone:"info",children:d||s||"Collection title"}),e.jsx(a,{variant:"bodySm",tone:"subdued",children:`${window.location.hostname}/collections/${c||"collection-handle"}`}),e.jsx(a,{variant:"bodySm",children:h||u||"Add a description to see how this collection might appear in a search engine listing"})]})}),e.jsx(S,{label:"Page title",value:d,onChange:M,placeholder:s||"Enter page title",helpText:`${d.length} of 70 characters used`,maxLength:70,disabled:l}),e.jsx(S,{label:"Description",value:h,onChange:z,placeholder:"Enter meta description",helpText:`${h.length} of 160 characters used`,maxLength:160,multiline:2,disabled:l}),e.jsx(S,{label:"URL handle",value:c,onChange:y,placeholder:"collection-handle",prefix:`${window.location.hostname}/collections/`,helpText:"Used in the web address",disabled:l})]})]})})]})}),e.jsx(E.Section,{variant:"oneThird",children:e.jsxs(n,{gap:"500",children:[e.jsx(p,{children:e.jsxs(n,{gap:"400",children:[e.jsx(a,{variant:"headingMd",as:"h3",children:"Publishing"}),e.jsx(a,{variant:"bodyMd",fontWeight:"semibold",children:"Sales channels"}),e.jsxs(n,{gap:"200",children:[e.jsx(O,{label:"Online Store",checked:m.online,onChange:i=>A({...m,online:i})}),e.jsx(O,{label:"Point of Sale",checked:m.pos,onChange:i=>A({...m,pos:i}),helpText:"Available to all locations"})]})]})}),e.jsx(p,{children:e.jsxs(n,{gap:"400",children:[e.jsx(a,{variant:"headingMd",as:"h3",children:"Image"}),e.jsx("div",{style:{border:"2px dashed #ddd",borderRadius:"8px",padding:"40px",textAlign:"center",background:"#fafafa",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:i=>{i.currentTarget.style.borderColor="#6366f1",i.currentTarget.style.background="#f5f5ff"},onMouseLeave:i=>{i.currentTarget.style.borderColor="#ddd",i.currentTarget.style.background="#fafafa"},children:e.jsxs(n,{gap:"200",children:[e.jsx("div",{style:{margin:"0 auto"},children:e.jsx(V,{source:te,tone:"subdued"})}),e.jsxs(n,{gap:"100",children:[e.jsx(r,{variant:"primary",size:"slim",children:"Add image"}),e.jsx(a,{variant:"bodySm",tone:"subdued",children:"or drop an image to upload"})]})]})})]})}),e.jsx(p,{children:e.jsxs(n,{gap:"400",children:[e.jsx(a,{variant:"headingMd",as:"h3",children:"Theme template"}),e.jsx(ne,{label:"",options:[{label:"Default collection",value:"default"},{label:"Custom template 1",value:"custom1"},{label:"Custom template 2",value:"custom2"}],value:"default",onChange:()=>{}})]})})]})})]})]}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",padding:"1rem",boxShadow:"0 -4px 20px rgba(0,0,0,0.2)",backdropFilter:"blur(10px)",zIndex:999,borderTop:"2px solid rgba(99, 102, 241, 0.3)"},children:e.jsxs(g,{align:"center",gap:"400",children:[e.jsx(r,{size:"large",variant:"primary",icon:ae,onClick:()=>{window.scrollTo({top:0,behavior:"smooth"});const i=document.querySelector('input[placeholder="Summer Collection, Best Sellers, etc."]');i&&i.focus()},children:"Quick Create"}),e.jsx(r,{size:"large",icon:H,onClick:()=>v("/app/collections"),children:"View Collections"}),e.jsx(r,{size:"large",icon:oe,onClick:()=>window.location.reload(),children:"Reset Form"}),e.jsx(r,{size:"large",icon:k,onClick:()=>handleAISuggestions(),children:"AI Suggest"})]})}),e.jsx("div",{style:{paddingBottom:"100px"}})]})}export{Ae as default,ze as links};
