import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{R as W,u as U,c as V,r as k}from"./components-DK7TFnBr.js";import{P as G,B as t}from"./Page-BePJ91lz.js";import{T as Z}from"./TitleBar-aGDsqF3i.js";import{b as r,c as i,T as n,I as c,C as x,B as a,d as m}from"./ButtonGroup-DgNny8n-.js";import{G as f}from"./Grid-88T-Pb-u.js";import{P as S}from"./ProgressBar-CUIdQP7m.js";import{a as $,S as T}from"./CheckIcon.svg-DaHPfNLC.js";import{S as z}from"./XSmallIcon.svg-24jpfNfb.js";import{L as I}from"./Layout-CR-2O1w0.js";import{E as q}from"./EmptyState-B0o5Meh0.js";import{D as K}from"./DataTable-whaFcay8.js";import{S as A}from"./MagicIcon.svg-Cq1XyIoH.js";import{L as d}from"./List-DxpaJmNy.js";import{S as D}from"./RefreshIcon.svg-dwuhltUX.js";import{S as Q}from"./ProductIcon.svg-CmgSEMw5.js";import{M as L,S as Y}from"./Modal-Bmn2ovDN.js";import{S as J}from"./CollectionIcon.svg-Cg2nuJZe.js";import{S as _}from"./ImportIcon.svg-BseU5CJf.js";import{S as N}from"./ChartVerticalFilledIcon.svg-B8ybti0_.js";import{S as ee}from"./ChartVerticalIcon.svg-BXHDKIYl.js";import"./context-BTIEeRbG.js";import"./context-xI5rfeLT.js";import"./context-C3Cd1xwR.js";var H=function(h){return W.createElement("svg",Object.assign({viewBox:"0 0 20 20"},h),W.createElement("path",{fillRule:"evenodd",d:"M8.469 5.785c-.966-1.047-2.505-1.047-3.47 0-.998 1.081-.998 2.857 0 3.939l5.001 5.42 5.002-5.42c.997-1.082.997-2.858 0-3.939-.966-1.047-2.505-1.047-3.47 0l-.98 1.062a.75.75 0 0 1-1.103 0l-.98-1.062Zm-4.573-1.017c1.56-1.69 4.115-1.69 5.675 0l.429.464.429-.464c1.56-1.69 4.115-1.69 5.675 0 1.528 1.656 1.528 4.317 0 5.973l-5.185 5.62a1.25 1.25 0 0 1-1.838 0l-5.185-5.62c-1.528-1.656-1.528-4.317 0-5.973Z"}))};H.displayName="HeartIcon";function ke(){const{collections:l}=U(),h=V(),[g,E]=k.useState(null),[F,v]=k.useState(!1),[j,b]=k.useState("all"),y=l.filter(s=>s.overallScore>=80),w=l.filter(s=>s.overallScore>=60&&s.overallScore<80),u=l.filter(s=>s.overallScore<60),R=l.length>0?Math.round(l.reduce((s,o)=>s+o.overallScore,0)/l.length):0,M=s=>s>=80?e.jsxs(t,{tone:"success",children:[s,"/100"]}):s>=60?e.jsxs(t,{tone:"warning",children:[s,"/100"]}):e.jsxs(t,{tone:"critical",children:[s,"/100"]}),P=s=>s>=80?"#10b981":s>=60?"#f59e0b":"#ef4444",X=s=>s==="up"?e.jsx(c,{source:N,tone:"success"}):s==="down"?e.jsx(c,{source:ee,tone:"critical"}):e.jsx(c,{source:D}),B=j==="all"?l:j==="healthy"?y:j==="warning"?w:u,O=s=>{E(s),v(!0)};return e.jsxs(G,{children:[e.jsx(Z,{title:"Collection Health Score"}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #3b82f6 50%, #8b5cf6 100%)",padding:"2rem",borderRadius:"16px",marginBottom:"1.5rem",position:"relative",overflow:"hidden"},children:[e.jsx("style",{children:`
            @keyframes heartbeat {
              0%, 100% { transform: scale(1); }
              50% { transform: scale(1.1); }
            }
            
            .heart-icon {
              animation: heartbeat 2s ease-in-out infinite;
            }
            
            .health-card {
              transition: all 0.3s ease;
              cursor: pointer;
            }
            
            .health-card:hover {
              transform: translateY(-5px);
              box-shadow: 0 15px 30px rgba(0,0,0,0.2);
            }
            
            .health-ring {
              transition: all 0.5s ease;
              stroke-dasharray: 440;
              stroke-dashoffset: 440;
              animation: fillRing 2s ease-out forwards;
            }
            
            @keyframes fillRing {
              to {
                stroke-dashoffset: 0;
              }
            }
          `}),e.jsxs(r,{gap:"400",children:[e.jsxs(i,{align:"space-between",children:[e.jsxs("div",{children:[e.jsx(n,{as:"h1",variant:"headingXl",children:e.jsx("span",{style:{color:"white",fontWeight:"bold"},children:"Collection Health Monitor"})}),e.jsx(n,{variant:"bodyLg",children:e.jsx("span",{style:{color:"rgba(255,255,255,0.9)"},children:"Track and improve your collection performance"})})]}),e.jsx("div",{className:"heart-icon",children:e.jsx(c,{source:H,tone:"base"})})]}),e.jsxs(i,{gap:"200",children:[e.jsxs(t,{tone:"success",children:[y.length," Healthy"]}),e.jsxs(t,{tone:"warning",children:[w.length," Need Attention"]}),e.jsxs(t,{tone:"critical",children:[u.length," Critical"]})]})]})]}),e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsxs(f,{children:[e.jsx(f.Cell,{columnSpan:{xs:6,sm:3,md:3,lg:3,xl:3},children:e.jsx(x,{children:e.jsxs(r,{gap:"200",children:[e.jsxs(i,{align:"space-between",children:[e.jsx(c,{source:H,tone:"success"}),e.jsx(t,{tone:"success",children:"Health"})]}),e.jsxs(n,{variant:"headingXl",children:[R,"/100"]}),e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Average Score"}),e.jsx(S,{progress:R,tone:"success"})]})})}),e.jsx(f.Cell,{columnSpan:{xs:6,sm:3,md:3,lg:3,xl:3},children:e.jsx(x,{children:e.jsxs(r,{gap:"200",children:[e.jsxs(i,{align:"space-between",children:[e.jsx(c,{source:$,tone:"success"}),e.jsx(n,{variant:"bodySm",children:"Healthy"})]}),e.jsx(n,{variant:"headingXl",children:y.length}),e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Collections"}),e.jsx(S,{progress:y.length/l.length*100,tone:"success"})]})})}),e.jsx(f.Cell,{columnSpan:{xs:6,sm:3,md:3,lg:3,xl:3},children:e.jsx(x,{children:e.jsxs(r,{gap:"200",children:[e.jsxs(i,{align:"space-between",children:[e.jsx(c,{source:T,tone:"warning"}),e.jsx(n,{variant:"bodySm",children:"Warning"})]}),e.jsx(n,{variant:"headingXl",children:w.length}),e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Need Attention"}),e.jsx(S,{progress:w.length/l.length*100,tone:"warning"})]})})}),e.jsx(f.Cell,{columnSpan:{xs:6,sm:3,md:3,lg:3,xl:3},children:e.jsx(x,{children:e.jsxs(r,{gap:"200",children:[e.jsxs(i,{align:"space-between",children:[e.jsx(c,{source:z,tone:"critical"}),e.jsx(n,{variant:"bodySm",children:"Critical"})]}),e.jsx(n,{variant:"headingXl",children:u.length}),e.jsx(n,{variant:"bodySm",tone:"subdued",children:"Immediate Action"}),e.jsx(S,{progress:u.length/l.length*100,tone:"critical"})]})})})]})}),e.jsxs(I,{children:[e.jsx(I.Section,{children:e.jsx(x,{children:e.jsxs(r,{gap:"400",children:[e.jsxs(i,{align:"space-between",children:[e.jsx(n,{variant:"headingMd",children:"Collection Health Overview"}),e.jsxs(i,{gap:"200",children:[e.jsx(a,{onClick:()=>b("all"),pressed:j==="all",children:"All"}),e.jsx(a,{onClick:()=>b("healthy"),pressed:j==="healthy",children:"Healthy"}),e.jsx(a,{onClick:()=>b("warning"),pressed:j==="warning",children:"Warning"}),e.jsx(a,{onClick:()=>b("critical"),pressed:j==="critical",children:"Critical"})]})]}),B.length===0?e.jsx(q,{heading:"No collections found",image:"https://cdn.shopify.com/s/files/1/0262/4071/2726/files/emptystate-files.png",children:e.jsx("p",{children:"Create collections to monitor their health"})}):e.jsx(K,{columnContentTypes:["text","numeric","text","text","text","text"],headings:["Collection","Health Score","Status","Issues","Trend","Actions"],rows:B.map(s=>{const o=s.metrics.filter(C=>C.status==="critical").length,p=s.metrics.filter(C=>C.status==="warning").length;return[e.jsx(n,{variant:"bodyMd",fontWeight:"semibold",children:s.title}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"50px",height:"50px",position:"relative"},children:e.jsxs("svg",{width:"50",height:"50",children:[e.jsx("circle",{cx:"25",cy:"25",r:"20",fill:"none",stroke:"#e5e7eb",strokeWidth:"4"}),e.jsx("circle",{cx:"25",cy:"25",r:"20",fill:"none",stroke:P(s.overallScore),strokeWidth:"4",strokeDasharray:`${s.overallScore/100*126} 126`,transform:"rotate(-90 25 25)"}),e.jsx("text",{x:"25",y:"25",textAnchor:"middle",dy:"5",fontSize:"14",fontWeight:"bold",children:s.overallScore})]})}),M(s.overallScore)]}),s.overallScore>=80?e.jsx(t,{tone:"success",children:"Healthy"}):s.overallScore>=60?e.jsx(t,{tone:"warning",children:"Warning"}):e.jsx(t,{tone:"critical",children:"Critical"}),e.jsxs(i,{gap:"100",children:[o>0&&e.jsxs(t,{tone:"critical",children:[o," critical"]}),p>0&&e.jsxs(t,{tone:"warning",children:[p," warning"]}),o===0&&p===0&&e.jsx(t,{tone:"success",children:"No issues"})]}),X(s.trend),e.jsxs(i,{gap:"100",children:[e.jsx(a,{size:"slim",onClick:()=>O(s),children:"View Details"}),e.jsx(a,{size:"slim",icon:A,onClick:()=>h("/app/collections-enhanced"),children:"Fix Now"})]})]})})]})})}),e.jsx(I.Section,{variant:"oneThird",children:e.jsxs(r,{gap:"400",children:[e.jsx(x,{children:e.jsxs(r,{gap:"300",children:[e.jsx(n,{variant:"headingMd",children:"Health Tips"}),e.jsxs(d,{type:"bullet",children:[e.jsx(d.Item,{children:e.jsx(n,{variant:"bodySm",children:"Keep at least 10 products per collection"})}),e.jsx(d.Item,{children:e.jsx(n,{variant:"bodySm",children:"Update collections weekly for freshness"})}),e.jsx(d.Item,{children:e.jsx(n,{variant:"bodySm",children:"Add high-quality images with alt text"})}),e.jsx(d.Item,{children:e.jsx(n,{variant:"bodySm",children:"Write descriptions of 150+ characters"})}),e.jsx(d.Item,{children:e.jsx(n,{variant:"bodySm",children:"Use SEO-friendly URLs with hyphens"})})]})]})}),e.jsx(x,{children:e.jsxs(r,{gap:"300",children:[e.jsx(n,{variant:"headingMd",children:"Quick Fixes"}),e.jsxs(r,{gap:"200",children:[e.jsx(a,{fullWidth:!0,icon:A,children:"Auto-Fix All Issues"}),e.jsx(a,{fullWidth:!0,icon:D,children:"Refresh All Collections"}),e.jsx(a,{fullWidth:!0,icon:Q,children:"Add Missing Products"})]})]})}),e.jsx(x,{children:e.jsxs(r,{gap:"300",children:[e.jsx(n,{variant:"headingMd",children:"Top Issues"}),e.jsxs(r,{gap:"200",children:[e.jsx(m,{padding:"200",background:"bg-surface-critical-subdued",borderRadius:"200",children:e.jsxs(i,{gap:"200",children:[e.jsx(c,{source:z,tone:"critical"}),e.jsxs(n,{variant:"bodySm",children:[u.length," collections need immediate attention"]})]})}),e.jsx(m,{padding:"200",background:"bg-surface-warning-subdued",borderRadius:"200",children:e.jsxs(i,{gap:"200",children:[e.jsx(c,{source:T,tone:"warning"}),e.jsxs(n,{variant:"bodySm",children:[l.filter(s=>s.metrics.some(o=>o.name==="Freshness"&&o.status!=="good")).length," collections need updating"]})]})})]})]})})]})})]}),e.jsx(L,{open:F,onClose:()=>v(!1),title:`Health Report: ${g==null?void 0:g.title}`,size:"large",primaryAction:{content:"Fix Issues",onAction:()=>{v(!1),h("/app/collections-enhanced")}},secondaryActions:[{content:"Close",onAction:()=>v(!1)}],children:e.jsx(L.Section,{children:g&&e.jsxs(r,{gap:"400",children:[e.jsx(m,{padding:"400",background:"bg-surface-neutral-subdued",borderRadius:"200",children:e.jsxs(i,{align:"space-between",children:[e.jsxs("div",{children:[e.jsx(n,{variant:"headingLg",children:"Overall Health Score"}),e.jsxs(n,{variant:"bodySm",tone:"subdued",children:["Last updated: ",new Date(g.lastUpdated).toLocaleDateString()]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs(n,{variant:"heading2xl",children:[g.overallScore,"/100"]}),M(g.overallScore)]})]})}),e.jsx(r,{gap:"300",children:g.metrics.map(s=>e.jsx(x,{children:e.jsxs(r,{gap:"200",children:[e.jsxs(i,{align:"space-between",children:[e.jsx(n,{variant:"headingSm",children:s.name}),e.jsxs(i,{gap:"200",children:[e.jsxs(n,{variant:"bodyMd",children:[s.score,"/",s.maxScore]}),e.jsx(t,{tone:s.status==="good"?"success":s.status==="warning"?"warning":"critical",children:s.status})]})]}),e.jsx(S,{progress:s.score/s.maxScore*100,tone:s.status==="good"?"success":s.status==="warning"?"warning":"critical"}),s.issues.length>0&&e.jsx(m,{padding:"200",background:"bg-surface-critical-subdued",borderRadius:"100",children:e.jsxs(r,{gap:"100",children:[e.jsx(n,{variant:"bodySm",fontWeight:"semibold",children:"Issues:"}),e.jsx(d,{type:"bullet",children:s.issues.map((o,p)=>e.jsx(d.Item,{children:e.jsx(n,{variant:"bodySm",children:o})},p))})]})}),s.recommendations.length>0&&e.jsx(m,{padding:"200",background:"bg-surface-info-subdued",borderRadius:"100",children:e.jsxs(r,{gap:"100",children:[e.jsx(n,{variant:"bodySm",fontWeight:"semibold",children:"Recommendations:"}),e.jsx(d,{type:"bullet",children:s.recommendations.map((o,p)=>e.jsx(d.Item,{children:e.jsx(n,{variant:"bodySm",children:o})},p))})]})})]})},s.name))})]})})}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",padding:"1rem",boxShadow:"0 -4px 20px rgba(0,0,0,0.2)",zIndex:1e3},children:e.jsxs(i,{align:"center",gap:"400",children:[e.jsx(a,{size:"large",icon:Y,onClick:()=>h("/app"),children:"Home"}),e.jsx(a,{size:"large",icon:J,onClick:()=>h("/app/collections-enhanced"),children:"Collections"}),e.jsx(a,{size:"large",icon:_,onClick:()=>h("/app/bulk-operations"),children:"Bulk Ops"}),e.jsx(a,{size:"large",icon:A,onClick:()=>h("/app/ai-collections"),children:"AI Magic"}),e.jsx(a,{size:"large",icon:N,onClick:()=>h("/app/analytics"),children:"Analytics"})]})}),e.jsx("div",{style:{paddingBottom:"100px"}})]})}export{ke as default};
